2D繪圖標示分類, 請用flag開關, flag於drafter_config.json設定, default關
1. 基本資料: 
   軌道取料明細球號
   軌道取料明細表長度
   BOM 球號
   上下軌道總長度
   上軌兩端點內側長度— 斜向尺寸線，顯示上軌整體長度
   軌道外側跨距尺寸— 垂直尺寸，上軌端點 X 跨距 + 管徑
   弧半徑 R
2. 腳架與上下軌夾角標示: 角度標示應取軌道與腳架相符角度標示, 1隻腳架取1隻腳架上下夾角標示, 2隻腳架取2隻腳架上夾角標示
3. 兩側上下軌道關係位置
   .上下軌道中心線垂直距離  => 往軌道外側標示, 軌道左側標示軌道左邊, 軌道右側標示軌道右邊 
   .上下軌道內側距離 => 往軌道外側標示, 軌道左側標示軌道左邊, 軌道右側標示軌道右邊   
   .上下軌道末端距離 => 往軌道外側標示, 左側延著下軌平行方向標示, 右側延著上軌平行方向標示

彎曲角（軌道段之間的角度） => 先mark
管徑 Ø => 先mark

腳架到彎曲段距離 => 後面再評

同一section 軌道直徑相同, 上下軌角度左下右上 
            支撐架長度相同
2-2.stp : 由下至上軌道左彎
          .第一段腳架施工圖 : BOM表 : 腳架*2
                               軌道取料明細 : 上軌軌道*3(直->彎->直) + 下軌軌道*3(直->彎->直) 
          .軌道施工圖 : BOM表 : 支撐架*5
                        軌道取料明細 : 上軌軌道*1(彎) + 下軌道軌*1(彎)  
          .第二段腳架施工圖 : BOM表 : 腳架*1section
                               軌道取料明細 : 上軌軌道*3(直->彎->直) + 下軌軌道*2(直->彎)
2-4.stp : 由下至上軌道右彎
          .第一段腳架施工圖 : BOM表 : 腳架*1 + 支撐架*1
                               軌道取料明細 : 上軌軌道*1(直) + 下軌道直軌*1(直) 
          .軌道施工圖 : BOM表 : 支撐架*5
                        軌道取料明細 : 上軌軌道*1(彎) + 下軌道軌*1(彎)  
          .第二段腳架施工圖 : BOM表 : 腳架*2 
                               軌道取料明細 : 上軌軌道*3(直->彎->直) + 下軌軌道*3(直->彎->直)
1-2.stp : 由下至上軌道左彎
          .第一段腳架施工圖 : BOM表 : 腳架*1 + 支撐架*1
                               軌道取料明細 : 上軌軌道*1(直) + 下軌道直軌*1(直) 
          .軌道施工圖 : BOM表 : 支撐架*5
                        軌道取料明細 : 上軌軌道*1(彎) + 下軌道軌*1(彎)  
          .第二段腳架施工圖 : BOM表 : 腳架*2 
                               軌道取料明細 : 上軌軌道*3(直->彎->直) + 下軌軌道*3(直->彎->直)

claude --resume 87e44caa-03a7-4b99-b18e-621b51f37079

review code
1.是否有hardcode 
2.組裝施工圖(draw 0,1,2,3)因"軌道取料明細" & "BOM" 及軌道左彎及右彎造成內容及標示有誤風險
3.function是否可以再精簡, 彈性, 共用
4.是否有更新更快package或寫法

3D圖檔2-2.stp驗證, 第二段腳架施工圖 draw 3: 
程式產生結果: @.\test\2-2-3-new.jpg
1. 軌道彎軌角度錯誤, 應該是左上右下
是否為視角問題?



3D圖檔2-4.stp驗證, 第二段腳架施工圖 draw 3: 
標準圖: @.\test\2-4-3.jpg, 程式產生結果: @.\test\2-4-3-new.jpg
1. 軌道彎軌長度(U2 1025)不須標示
2. 移除這條標示線
follow 軌道左彎(2-2.stp)標示


3D圖檔2-4.stp驗證, 施工圖視角慣例（Draw 1 / 2 / 3 統一視角）修改
軌道施工圖 draw 2 | 兩端各在左右 | — | 弧管正視，開口朝下 

3D圖檔2-4.stp驗證, 組件totoal有幾個? 是否有組件不在施工圖(draw 1,2,3)的"軌道取料明細" & "BOM"裡面?
程式產生draw 1,2,3後, 如果有未分配組件, 或組件重複分配, 請出現警告訊息提示施工圖有問題(有未分配組件, 或組件重複分配)

3D圖檔2-4.stp驗證, 第一段腳架施工圖 draw 1未標示支撐架

3D圖檔2-4.stp驗證, 第一段腳架施工圖 draw 1, 軌道上軌&下軌應由左下至右上, 為何與標準圖(標準圖: @.\test\2-4-1.jpg)不同, 是因為視角不同嗎?

1.少支撐架*1
2.軌道上軌&下軌應由左下至右上
3.左右上下軌道末端距離應標示在線中間

3D圖檔2-4.stp驗證, 第二段腳架施工圖 draw 3: 
.軌道取料明細 => 上軌道由左至右順序為長度=280.3 -> 彎軌角度15-> 長度=249.3
.軌道取料明細 => 下軌道由左至右順序為長度=190 -> 彎軌角度15-> 長度=338.8
請先查明原因? 我確認後再進行修改

3D圖檔2-4.stp驗證, 第二段腳架施工圖 draw 3: 
標準圖: @.\test\2-4-3.jpg, 程式產生結果: .\test\2-4-3-new.jpg
.軌道取料明細 => 上軌道由左至右順序為長度=280.3 -> 彎軌角度15-> 長度=249.3
.軌道取料明細 => 下軌道由左至右順序為長度=190 -> 彎軌角度15-> 長度=338.8
請先查明原因? 我確認後再進行修改


3D圖檔2-4.stp驗證, 第二段腳架施工圖 draw 3: 
標準圖: @.\test\2-4-3.jpg, 程式產生結果: .\test\2-4-3-new.jpg
.軌道取料明細 => U1長度錯誤, 下軌道各少一支彎軌 
.左腳架位置太高, 上下軌道方向應是左下又上
請先查明原因? 我確認後再進行修改

3D圖檔2-4.stp驗證, 第二段腳架施工圖 draw 3: 
標準圖: .\test\2-4-3.jpg, 程式產生結果: .\test\2-4-3new.jpg
.軌道取料明細 & BOM表 取料邏輯為何? 程式產生結果與標準圖不同?
請先查明原因? 我確認後再進行修改

3D圖檔2-4.stp驗證, 第二段腳架施工圖 draw 3: 
標準圖: @.\test\2-4-1.jpg, 程式產生結果: .\test\2-4-3new.jpg
.軌道取料明細 => U1長度錯誤, 下軌道各少一支彎軌 
.左腳架位置太高, 上下軌道方向應是左下又上
請先查明原因? 我確認後再進行修改


3D圖檔2-4.stp驗證, 第二段腳架施工圖 draw 3: 
標準圖: .\test\2-4-3.jpg, 程式產生結果: .\test\2-4-3new.jpg
.軌道取料明細 => 上下軌道各少一支彎軌 
.BOM表 => 少一支腳架
.腳架施工圖 => 你在畫什麼? 畫這種圖能看嗎?
請先查明原因? 我確認後再進行修改




3D圖檔2-4.stp驗證, 第二段腳架施工圖 draw 3: 標準圖: .\test\2-4-3.jpg, 程式產生結果: .\test\2-4-3new.jpg
.軌道取料明細 & BOM表 取料邏輯為何? 程式產生結果與標準圖不同?
請先查明原因? 我確認後再進行修改

腳架與上下軌夾角標示: 角度標示應取軌道與腳架相符角度標示, 1隻腳架取1隻腳架上下夾角標示, 2隻腳架取2隻腳架上夾角標示
=> 42°已標示, 應標示58°於紅框位置ˋ


直線段施工圖 draw 1, 標準圖: .\test\2-2-1-check.jpg, 程式產生結果.\test\2-2-1-new.jpg, 錯誤如紅框部分
兩側上下軌道關係距離錯
   .上下軌道中心線垂直距離  => 左側&右側都錯誤, 實際值請參考標準圖
   .上下軌道內側距離 => 左側&右側都錯誤, 實際值請參考標準圖   
   .上下軌道末端距離 => 左側&右側都錯誤, 實際值請參考標準圖

直線段施工圖 draw 1, 標準圖: .\test\2-2-1-check.jpg, 程式產生結果.\test\2-2-1-new.jpg, 錯誤如紅框部分
兩側上下軌道關係位置標示未顯示
.上下軌道內側距離 => 往軌道外側標示, 軌道左側標示軌道左邊, 如紅框1對照標準圖藍框1, 
                                       軌道右側標示軌道右邊, 如紅框3對照標準圖藍框3   
.上下軌道末端距離 => 往軌道外側標示, 左側延著下軌平行方向標示, 如紅框2對照標準圖藍框2, 
                                       右側延著上軌平行方向標示, 如紅框4對照標準圖藍框4


第二段腳架施工圖 draw 3: 標準圖: .\test\2-2-3.jpg, 程式產生結果: .\test\2-2-3-new.jpg
腳架與上下軌夾角標示: 角度標示應取軌道與腳架相符角度標示, 1隻腳架取1隻腳架上下夾角標示, 2隻腳架取2隻腳架上夾角標示
=> 42°已標示, 應標示58°於紅框位置ˋ

第二段腳架施工圖 draw 3: 標準圖: .\test\2-2-3.jpg, 程式產生結果: .\test\2-2-3-new.jpg
Spec如下:
腳架與上下軌夾角標示: 角度標示應取軌道與腳架相符角度標示, 1隻腳架取1隻腳架上下夾角標示, 2隻腳架取2隻腳架上夾角標示
=>42° & 58°標示位置顛倒 => 應選腳架與上下軌夾角42°的位置(左下)標示42°, 應選腳架與上下軌夾角58°的位置(右上)標示58°


第二段腳架施工圖 draw 3: 標準圖: .\test\2-2-3-check.jpg, 程式產生結果: .\test\2-2-3-new.jpg
腳架位置應往左移

直線段施工圖 draw 1, 標準圖: .\test\2-2-1.jpg, 程式產生結果.\test\2-2-1-new.jpg, 錯誤如紅框部分
1. 移除°標示

直線段施工圖 draw 1, 標準圖: .\test\2-2-1.jpg, 程式產生結果.\test\2-2-1-new.jpg, 錯誤如紅框部分
1. 48.1是什麼圖示?
2 & 3 腳架與上下軌夾角標示邏輯

2026/02/09
=================================================================
修改auto_drafter_system.py 腳架/軌道邏輯如下
1. 全部圖.stp腳架長度計算 = total length - 50 (個位數4捨五入到10位數)
2. 全部圖"軌道取料表"第2欄欄寬縮小1/4
3. 全部圖"BOM表"第4欄欄寬縮小1/3


.軌道長度 = 管長 - 接管
標準 ~\test\2-2-1jpg, 程式產生結果~\test\2-2-1-new.jpg, 錯誤如紅框部分

draw 0, 1, 2, 3, 材料氣泡標示寫成共用function
規格: 藍色, 引線長度一致, 統一標示該材料中心線垂直外側方向
評估draw 0,1,2,3, 軌道 & 腳架尺寸標示寫成共用function



組件圖 draw 0: 標準圖: .\test\2-2-0.jpg, 程式產生結果: .\test\2-2-0-new.jpg, 錯誤如紅框部分
標示應置於材料外側, 尺寸線盡量避免與輪廓線重疊 保持圖面清楚
俯視立體透視圖(右): X軸旋轉180度
                        半徑R250 => 標示於軌道外側


組件圖 draw 0: 標準圖: .\test\2-2-0.jpg, 程式產生結果: .\test\2-2-0-new.jpg, 錯誤如紅框部分
1. 立體等角視圖(左): 旋轉角度錯誤 => follow標準圖旋轉方式
                      上軌兩端點內側長度1132 => 應為1092.4
2. 俯視立體透視圖(右): 旋轉角度錯誤 => follow標準圖旋轉方式
                        標示軌兩道端點外側長度598.8=> 應為548.1, 
                        半徑R1113.2 => 應為R250, follow 軌道施工圖側視圖(下圖)標示方式


組件圖 draw 0: 標準圖: .\test\2-2-0.jpg, 程式產生結果: .\test\2-2-0-new.jpg, 錯誤如紅框部分
1. 未產生及預覽
2. 立體等角視圖(左), x軸旋轉180度, 標示上軌兩端點內側長度1095.9 => 應為1092.4
3. 俯視立體透視圖(右), x軸旋轉180度, 標示軌兩道端點外側長度494.8=> 應為548.1, 半徑R242 => 應為R250
4. 公司資訊由上至至下為公司->日期>單位->比例->理圖, 第1,2,3,4,5欄欄寬縮小1/3, 第6欄欄寬縮小1/2


直線段施工圖 draw 1: 標準圖: .\test\2-2-1jpg, 程式產生結果: .\test\2-2-1-new.jpg, 錯誤如紅框部分
2-2-1-new.jpg腳架與軌道的比例及上軌與下軌的幅度, 與標準圖是不是不一致


直線段施工圖 draw 1: 標準圖: .\test\2-2-1jpg, 程式產生結果: .\test\2-2-1-new.jpg, 錯誤如紅框部分
標示應置於材料外側, 尺寸線盡量避免與輪廓線重疊 保持圖面清楚
檢查腳架1位置與長度與標準圖不符=> 應該要右移


直線段施工圖 draw 1: 標準圖: .\test\2-2-1jpg, 程式產生結果: .\test\2-2-1-new.jpg, 錯誤如紅框部分
1. 腳架1長度490 => 正確510
2. 腳架2長度450 => 正確470
3. 上軌&下軌上彎 => 正確下彎, 彎道段施工圖 draw 3是上彎
4. "軌道取料明細","BOM", "公司資訊" 左邊線對齊


軌道施工圖 draw 2: 標準圖: .\test\2-2-2.jpg, 程式產生結果: .\test\2-2-2-new.jpg, 錯誤如下
五個紅色圓形處支撐架太長 紅色矩形處中心線 使用中心線型 與軌道輪廓的實線區分

軌道施工圖 draw 2: 標準圖: .\test\2-2-2.jpg, 程式產生結果: .\test\2-2-2-new.jpg, 錯誤如紅框部分
1. 軌道取料明細: R=242(178度) => 正確R=250(180度)
                 高低差490.3 => 正確R=490.8 
2. 軌道長度897 => 正確926
3. 俯視圖(上圖): 軌道內部不要有支撐架線, 支撐架以圓柱顯示, 
                  軌道兩端點長度532 => 正確700 
4. 側視圖(下圖): 上軌高度差490.3 => 正確490.8
                  上軌/下軌高度差267.2 => 正確230.2, 標示於右邊
                  支撐架不應超過上下軌

你看不出來嗎?
.程式產生結果軌道材料D2角度向下(附圖1紅框) vs 標準圖角度向上(附圖2籃框)
查明問題後, 我確認OK再修改, 不要擅自修改

直線段施工圖 draw 1, 標準圖: .\test\2-2-1.jpg, 程式產生結果.\test\2-2-1-new.jpg, 錯誤如紅框部分
1. 48.1是什麼圖示?
2 & 3 腳架與上下軌夾角標示

直線段施工圖 draw 1, 標準圖: .\test\2-2-1.jpg, 程式產生結果.\test\2-2-1-new.jpg, 錯誤如紅框部分
1. 176.3標示移除
2. 89.2標示移除
3. 下軌排列順序錯誤 => 由右至左應為D1->D2->D3

直線段施工圖 draw 1, 標準圖: .\test\2-2-1.jpg, 程式產生結果.\test\2-2-1-new.jpg, 錯誤如紅框部分
1.腳架2的長度470, 與下軌的接點位置太低
2.上軌U2角度向上 => 應該向下
3.上軌D2角度向上 => 應該向下
4.D1長度127.0 =>應為127.8
5.176.3是標示什麼距離?


直線段施工圖 draw 1, 請follow 第二段腳架施工圖 draw 3 修改
1.軌道材料U1,U2,U3,D1,D2,D3位置,與U2,D2角度
1.腳架與上下軌夾角標示位置
2.兩側上下軌道關係位置
  .上下軌道內側距離 => 往軌道外側標示, 軌道左側標示軌道左邊, 軌道右側標示軌道右邊 
  .上下軌道中心線垂直距離  => 往軌道外側標示, 軌道左側標示軌道左邊, 軌道右側標示軌道右邊 
  .上下軌道末端距離 => 往軌道外側標示, 左側延著下軌平行方向標示, 右側延著上軌平行方向標示


.以業界慣例(位置,符號, 顏色...), 標示軌道取料表球號

軌道施工圖 draw 2: 標準圖: .\test\2-2-2.jpg, 程式產生結果.\test\2-2-2-new.jpg, 錯誤如紅框部分
1. 俯視圖(上圖): 支撐架為何向軌道上側顯示 => 應該是向軌道下側顯示

軌道施工圖 draw 2: 標準圖: .\test\2-2-2.jpg, 程式產生結果: .\test\2-2-2-new.jpg, 錯誤如紅框部分
1. 俯視圖(上圖): 支撐架以圓柱向下顯示 => 圓柱應標示於下侧, 園柱依支撐架直徑&長度顯示
                  半徑標示方式未follow業界慣例 => 起點是否應該標示於圓弧中心點
這些標準圖都有, 為何測試無法發現?

2. 側視圖(下圖): 上軌/下軌高度差267.2 => 正確230.2, 標示於右邊 => 標示位置錯誤, 應至於上軌高度差正下方

實務上腳架施工圖(如附件)上下軌道末端距離應該如何標示

第二段腳架施工圖 draw 3: 標準圖: .\test\2-2-3-check.jpg, 程式產生結果: .\test\2-2-3-new.jpg
紅框1.左側上下軌道末端距離 => 標示錯誤, 應延著下軌平行方向標示, 請follow 標準圖藍框標示方法標示
紅框2.右側上下軌道末端距離 => 未標示, 應延著上軌平行方向標示, 請follow 標準圖藍框標示方法標示
紅框3.軌道D2角度下彎 => 角度應上彎, 請follow 標準圖藍框標示方法標示
程式產生結果與標準圖無法比較請先提出
修改後請執行test程式, 檢查程式無error, warning, 驗證材料明細 & BOM 內容, 圖形, 標示, 與標準圖須一致


第二段腳架施工圖 draw 3: 標準圖: .\test\2-2-3-check.jpg, 程式產生結果: .\test\2-2-3-new.jpg
紅框1.左側上下軌道內側距離 => 要再往左邊, 請follow 標準圖藍框標示方法標示於軌道外側 
紅框2.上下軌道末端距離 => 未標示, 請follow 標準圖藍框標示方法標示於軌道外側下方
紅框3.右側上下軌道中心線垂直距=> pass
紅框4.下軌道總長度 => 標示錯誤, 應為D1+D2, 請follow 標準圖藍框標示方法標示於軌道外側
紅框5.軌道D2角度 => 應往上, 請follow 標準圖藍框標示方法標示於軌道外側
程式產生結果與標準圖無法比較請先提出
修改後請執行test程式, 檢查程式無error, warning, 驗證材料明細 & BOM 內容, 圖形, 標示, 與標準圖須一致

第二段腳架施工圖 draw 3: 標準圖: .\test\2-2-3-check.jpg, 程式產生結果: .\test\2-2-3-new.jpg
紅框1.左側上下軌道中心線垂直距 => pass
紅框2.左側上下軌道內側距離 => 請follow 標準圖藍框標示方法標示於軌道外側
紅框3.左側上下軌道中心線垂直距離 => 請follow 標準圖藍框標示方法標示於軌道外側下方
紅框4.右側上下軌道中心線垂直距=> 請follow 標準圖藍框標示方法標示於軌道外側
紅框5.右側上下軌道內側距離 => 請follow 標準圖藍框標示方法標示於軌道外側
紅框6. 軌道D1 => 應為軌道D2
程式產生結果與標準圖無法比較請先提出
修改後請執行test程式, 檢查程式無error, warning, 驗證材料明細 & BOM 內容, 圖形, 標示, 與標準圖須一致


第二段腳架施工圖 draw 3: 標準圖: .\test\2-2-3-leg.jpg, 程式產生結果: .\test\2-2-3-new.jpg
1.下軌 D1 & D2位置錯誤 => 是否應該D1在左上? D2在右下
2.上下軌道內側距離 => 標示錯誤
3.上下軌道末端距離 => 未標示
修改後請執行test程式, 檢查程式無error, warning, 驗證材料明細 & BOM 內容, 圖形, 標示, 與標準圖須一致



第二段腳架施工圖 draw 3: 標準圖: .\test\2-2-3-leg.jpg, 程式產生結果: .\test\2-2-3-new.jpg
上軌&下軌位置, 角度, 方向 -> U1->U2->U3由右下至左上, D1->D2由右下至左上, 上下軌應往上彎
修改後請執行test程式, 檢查程式無error, warning, 驗證材料明細 & BOM 內容, 圖形, 標示, 與標準圖須一致

第二段腳架施工圖 draw 3: 標準圖: .\test\2-2-3-check.jpg, 程式產生結果: .\test\2-2-3-new.jpg
1.U1 & U3 軌道 => 相反
2.上下軌道內側距離 => 標示相反
.上下軌道內側距離 => 數字不一致, 往軌道外側標示, 軌道右側標示右邊 軌道左側標示右邊
.上下軌道中心線垂直距離  => 數字不一致, 往軌道外側標示, 軌道右側標示右邊 軌道左側標示右邊
.上下軌道末端距離  => 數字不一致, 往軌道外側標示, 軌道右側標示右邊 軌道左側標示右邊
腳架與軌道相對位置錯誤 => 腳架位置應往左移 
修改後請執行test程式, 檢查程式無error, warning, 驗證材料明細 & BOM 內容, 圖形, 標示, 與標準圖須一致

第二段腳架施工圖 draw 3: 標準圖: .\test\2-2-3-leg.jpg, 程式產生結果: .\test\2-2-3-new.jpg
1.U1 & U3 軌道 => 相反
2.上下軌道內側距離 => 標示相反
.上下軌道內側距離 => 數字不一致, 往軌道外側標示, 軌道右側標示右邊 軌道左側標示右邊
.上下軌道中心線垂直距離  => 數字不一致, 往軌道外側標示, 軌道右側標示右邊 軌道左側標示右邊
.上下軌道末端距離  => 數字不一致, 往軌道外側標示, 軌道右側標示右邊 軌道左側標示右邊
腳架與軌道相對位置錯誤 => 腳架位置應往左移 
修改後請執行test程式, 檢查程式無error, warning, 驗證材料明細 & BOM 內容, 圖形, 標示, 與標準圖須一致


第二段腳架施工圖 draw 3: 標準圖: .\test\2-2-3-leg.jpg, 程式產生結果: .\test\2-2-3-new.jpg
turnon 圖形標示:
.上下軌道內側距離 
.上下軌道中心線垂直距離 
.上下軌道末端距離 
修改後請執行test程式, 檢查程式無error, warning, 驗證材料明細 & BOM 內容, 圖形, 標示, 與標準圖須一致


第二段腳架施工圖 draw 3: 標準圖: .\test\2-2-3.jpg, 程式產生結果: .\test\2-2-3-check.jpg, 錯誤如紅框部分
1.角度16°/42°/58°標示位置錯誤 => 請與標準圖一致, 標示至標準圖位置

第二段腳架施工圖 draw 3: 標準圖: .\test\2-2-3.jpg, 程式產生結果: .\test\2-2-3-new.jpg, 錯誤如紅框部分
1.角度16°/42°/58°標示位置錯誤 => 請與標準圖一致
請對照標準圖位置及數字, 有問題須提出, 有差異須修正


第二段腳架施工圖 draw 3: 標準圖: .\test\2-2-3.jpg, 程式產生結果: .\test\2-2-3-new.jpg
0.標示直線軌道長度
1.上軌道長度錯誤
2.下軌道長度置錯誤
3.高低角 42°/58° => 分別於對應軌道標示
4.下軌道D1,D2角度錯誤
請對照標準圖位置及數字, 有問題須提出, 有差異須修正


第二段腳架施工圖 draw 3: 標準圖: .\test\2-2-3.jpg, 程式產生結果: .\test\2-2-3-new.jpg
1.上軌道長度錯誤, 下軌道長度為標示
2.角度位置標錯
3.下軌道長度及位置錯誤
4.腳架長度不用標示
5.腳架長度不用標示
請對照標準圖位置及數字, 有問題須提出, 有差異須修正


直線軌道長度
上軌與下軌長度
上下軌道左右兩端外側標示
.上下軌道內側距離 
.上下軌道中心線垂直距離 
.上下軌道末端距離 
繪圖? 材料明細 & BOM內容? 標示? ..

1號矩形 腳架位置尺寸 
2號矩形 腳架與軌道角度

第二段腳架施工圖 draw 3: 標準圖: .\test\2-2-3.jpg, 程式產生結果: .\test\2-2-3-new.jpg, 錯誤如紅框部分
1. 側視圖: 腳架或軌道相對位置錯誤 => ng
2. 材料球號氣泡標示方式: 不應與材料混淆, 統一標示起點,中心點或終點 => 請用藍色標示, 統一指向材料中心點, 不要與材料混淆
   draw 0,1,2也同步套用此規則嗎?


第二段腳架施工圖 draw 3: 標準圖: .\test\2-2-3.jpg, 程式產生結果: .\test\2-2-3-new.jpg, 錯誤如紅框部分
1. 側視圖: 腳架位置錯誤 => 應往後移
2. 材料球號氣泡標示方式: U2, D1, D2氣泡標示錯誤 => 應統一標示材料中心點垂直外側方向

第二段腳架施工圖 draw 3: 標準圖: .\test\2-2-3.jpg, 程式產生結果.\test\2-2-3-new.jpg, 錯誤如紅框部分
1. BOM: 腳架長度440  => 正確430
2. 側視圖: 腳架位置錯誤
3. 材料氣泡標示無法正確顯示位置, 沒看到U3 => 氣泡標示慣例如何顯示?
   

2026/02/07
=================================================================
新增"總施工圖"在"子系統施工圖"前, 標準.\test\2-2-0.jpg
1. 立體等角視圖(左), 須標示軌道端點長度 
2. 俯視立體透視圖(右), 須標示軌道端點長度與軌道半徑
3. 公司資訊(右下)
4. 先預覽, file產生在.\output\*-0.dxf
請參考.\test\2-2-0.jpg內容

組立施工圖"draw2, ~\test\2-2-2.jpg 左上角籃框內的圖是什麼圖?

程式產生結果~\test\2-2-2-new.jpg  

修改auto_drafter_system.py, "組立施工圖"draw2, 標準 ~\test\2-2-2.jpg, 程式產生結果~\test\2-2-2-new.jpg, 錯誤如紅框部分 
1. 2D 正投影俯視圖(左上), 標示半徑與軌道2端點距離
2. 軌道等角立體圖(左下), 標示上軌道2端點與上下軌道距離
3. 軌道取料明細(右上)
4. 軌道取料明細下方顯示軌道長度 xxx 仰角 xx 度
5. 支撐架BOM表(右中), 
6. 公司資訊(右下)
內容同~\test\2-2-2.jpg

1. 2D 俯視圖（左上）
移除 6 條多餘弧線（上下軌管壁+中心線），只保留 1 條中心線弧
支撐架標記：從徑向短線改為 X 標記 + 小圓圈
R 標示：從角落文字改為弧頂引線+標示（R242）
弦長尺寸：484（兩端點直線距離）
2. 等角立體圖（左下）
新增高低差標註：490.3（上軌起點→終點的 Z 差）
新增上下軌距離標註：219.6（rail_spacing）
3. 軌道取料明細（右上）
加寬表格欄位（130→155），確保長文字完整顯示
表格起始 X 座標左移（160→180），避免超出右邊界
4. 長度/仰角
已存在：長度898，仰角32度
5. 支撐架BOM表（右中）
已存在：1, 支撐架, 5, PSA32
6. 公司資訊（右下）
圖號修正：{base_name}-2 → LM-12
圖名修正：彎軌取料施工圖 → 彎軌軌道製圖


修改auto_drafter_system.py, "組立施工圖"draw 3, 標準 ~\test\2-2-3.jpg, 程式產生結果~\test\2-2-3-new.jpg, 錯誤如紅框部分 
1. 腳架與軌道有一個位置跑掉
2. 軌道角度應為上彎
3. draw 1, 2, 3使用程式預覽, 不是產生*preview.png

修改auto_drafter_system.py, "組立施工圖"draw 3, 標準 ~\test\2-2-3.jpg, 程式產生結果~\test\2-2-3-new.jpg, 錯誤如紅框部分 
施工圖 => follow draw 1 spec修改, 可使用draw 1程式在做一次
1. 腳架-> fail
2. 軌道-> fail
3. 標示-> fail
4. 球號-> fail

修改auto_drafter_system.py, "組立施工圖"draw 1, 標準 ~\test\2-2-1.jpg, 程式產生結果~\test\2-2-1-new.jpg, 錯誤如紅框部分 
施工圖 => 軌道彎曲角度錯誤, 軌道(材料)會標示球號應為U2/D2, 腳架球號1/2錯誤




1. 軌道取料表U3長度應為202.4, D1長度應為127.8 => fail
2. BOM表腳架1線長L應為510, 腳架2線長L應為470 => fail
3. 施工圖X軸翻轉180度  => 不見了, 球號是不是錯了
4. 施工圖軌道(材料)會標示球號


修改auto_drafter_system.py, "組立施工圖"draw 1, 標準 ~\test\2-2-1.jpg, 程式產生結果~\test\2-2-1-new.jpg, 錯誤如紅框部分 
1. 軌道取料表U3長度應為202.4, D1長度應為127.8 => fail
1. BOM表腳架1線長L應為510, 腳架2線長L應為470 => fail
2. 施工圖左半圖居中顯示  => 不夠置中, 軌道角度相反

修改auto_drafter_system.py, "組立施工圖"draw 1, 標準 ~\test\2-2-1.jpg, 程式產生結果~\test\2-2-1-new.jpg, 錯誤如紅框部分 
1. 軌道取料表U3長度應為202.4, D1長度應為127.8 => 還是一樣
1. BOM表腳架1線長L應為510, 腳架2線長L應為470 => 還是一樣
2. 施工圖改為前視圖X軸翻轉180度, 左半圖居中顯示  => 腳架1 & 腳架2為何靠在一起


修改auto_drafter_system.py, "組立施工圖"draw 1, 標準 ~\test\2-2-1.jpg, 程式產生結果~\test\2-2-1-new.jpg, 錯誤如紅框部分 
1. 軌道取料表U3長度應為202.4, D1長度應為127.8
1. BOM表腳架1線長L應為510, 腳架2線長L應為470
2. 施工圖改為前視圖X軸翻轉180度, 左半圖居中顯示


"組立施工圖" darw 2 為何軌道,支撐架,腳架為何沒有邊線
上圖改成角度(Z軸)32度顯示, 並註明長度與仰角於軌道取料明細表下
 請參照test\2-2-2.jpg內容
 follow draw1  & draw 3 軌道,支撐架,腳架顯示方式
 # 2. 收集可見邊（銳邊 + 平滑邊 + 縫合邊 + 輪廓線）
 visible_compounds = [
 hlr_shapes.VCompound(),              # 銳邊 (sharp)
 hlr_shapes.Rg1LineVCompound(),        # 平滑邊 (smooth/fillet)
 hlr_shapes.RgNLineVCompound(),        # 縫合邊 (sewn)
 hlr_shapes.OutLineVCompound(),        # 輪廓線 (silhouette)

Lint 錯誤都是既有的（L6780+） => Lint是什麼?

2026/02/6
=================================================================

除了"組立施工圖" darw 2上圖使用Z軸32度角度顯示, 還有其他圖示使用X or Y or Z軸特別角度顯示的嗎?

2-2-2.jpg是人工從3d圖檔(2-2.stp)轉出來的軌道2d組裝圖, 2-2-2-new.jpg是程式自動產生的軌道2d組裝圖, 兩者差異如紅框部分, 程式auto_drafter_system.py要如何修改, 才能與人工作業一致

對應程式碼： visible_compounds 的提取邏輯
